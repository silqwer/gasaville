<!DOCTYPE html>
<html>
  <head>
  	<meta charset='utf-8' />
    <title><%= title %></title>
    <link href='/common/css/style.css' rel='stylesheet' />
    <link href='/adm/css/layerPopup.css' rel='stylesheet' />
    <link href='/common/css/fullcalendar/fullcalendar.css' rel='stylesheet' />
	<link href='/common/css/fullcalendar/fullcalendar.print.css' rel='stylesheet' media='print' />
	
	<script src='/common/js/fullcalendar/moment.min.js'></script>
	<script src='/common/js/jquery/jquery.min.js'></script>
	<script src='/common/js/fullcalendar/fullcalendar.min.js'></script>
	
	<script src='/adm/js/gosa.js'></script>
	
	<script>
		  $(document).ready(function() {
			var today = new Date();
			var dd = today.getDate();
			var mm = today.getMonth()+1; //January is 0!
			var yyyy = today.getFullYear();
		
			if(dd<10) {
			    dd='0'+dd
			} 
			
			if(mm<10) {
			    mm='0'+mm
			} 
			today = yyyy+'-'+mm+'-'+dd;
			
			
			
		    $('#calendar').fullCalendar({
		      header: {
		        left: 'prev,next today',
		        center: 'title',
		        right: 'month,agendaWeek,agendaDay'
		      },
		      defaultDate: today,
		      navLinks: true, // can click day/week names to navigate views
		      selectable: true,
		      selectHelper: true,
		      eventClick: function(calEvent, jsEvent, view) { 	// 스케출 선택 이벤트
		          $(this).css('border-color', 'red');
		          window.gosa.updateLayerPopup('#updateLayer', calEvent);

		      }, 
		      dayClick: function(date, jsEvent, view) {	//날짜 선택 이벤트 

		          // change the day's background color just for fun
		          window.gosa.addLayerPopup('#addLayer');

		      },
		      editable: false,
		      eventLimit: true, // allow "more" link when too many events
		      events: [
		    	
		    	  <% for(let i=0; i< list.length; ++i){%>
		    	  {
		    		  	seq : '<%=list[i].seq%>',
						title : '<%=list[i].title%>', 
	    	  			start : '<%=list[i].start%>',
	    	  			attendance_date : '<%=list[i].attendance_date%>'
		    	  },
		    	  <% } %>
		      ]
		    });
		
		  });
	</script>
	<style>
	  body {
	    margin: 40px 10px;
	    padding: 0;
	    font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
	    font-size: 14px;
	  }
	
	  #calendar {
	    max-width: 900px;
	    margin: 0 auto;
	  }
	
	</style>
  </head>
  <body>
  	<% include ../common/header %>
  	<% include ../common/menu %>
    <h1><%= title %></h1>
    <form id="commonForm" name="commonForm"></form>
    <div id='calendar'></div>
    
    <!-- 임시등록 -->
    <div class="dim-layer">
	    <div class="dimBg"></div>
	    <div id="addLayer" class="pop-layer">
	        <div class="pop-container">
	            <div class="pop-conts">
	                
	                <a href="#" class="btn-layerClose">X</a>
	                
	                <div>
	                	<div>일정등록</div>
	                	<div>일정명: <input type="text" id="scheduleName"> </div>
	                	<div>신청일: <input type="date" id="applyDate"> </div>
	                	<div>출석일: <input type="date" id="attendanceDate"> </div>
	                </div>
	                <a href="#" id="addBtn" class="btn-layerClose">등록</a>
	            </div>
	        </div>
	    </div>
	</div>
	
	<div class="dim-layer2">
	    <div class="dimBg"></div>
	    <div id="updateLayer" class="pop-layer">
	        <div class="pop-container">
	            <div class="pop-conts">
	                
	                <a href="#" class="btn-layerClose">X</a>
	                
	                <div>
	                	<div>일정수정 </div>
	                	<div>일정명: <input type="text" id="udtSchName"></div>
	                	<div>신청일: <input type="date" id="udtAppDate"></div>
	                	<div>출석일: <input type="date" id="udtAttDate"></div>
	                	<input type="hidden" id="udtSchSeq">
	                	<input type="hidden" id="udtSchId">
	                </div>
	                <a href="#" id="updateBtn" class="btn-layerClose">수정</a>
	                <a href="#" id="deleteBtn" class="btn-layerClose">삭제</a>
	            </div>
	        </div>
	    </div>
	</div>
	
    <% include ../common/footer %>
  </body>
  <script src='/adm/js/schedule.js'></script>
</html>

