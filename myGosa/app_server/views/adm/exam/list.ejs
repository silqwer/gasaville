<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <% include ../common/head %>
  </head>
  <body>
  	<input type="hidden" id="page" name="page" value="<%=page%>">
  	<input type="hidden" id="category" name="category" value="<%=category%>">
    <div class="main-wrap">
  		<% include ../common/menu %>
  		<div class="content-wrap">
  			<h2><%= title %></h2>
  			
  			<div class="search">
					<select id="searchCategory">
					  <option value="name">고사장</option>
					  <option value="school">학교명</option>
					  <option value="addr">주소</option>
					</select>
					<form id="searchForm" method="get">
					<fieldset>
						<legend>검색</legend>
						<input type="text" id="searchWord" value="<%=word%>">
						<input type="button" value="검색" class="sbtn" data-url="/admin/exam/list" id="searchBtn">
					</fieldset>
					</form>
				</div>
  			
  			<% if(result == true) { %>
  			<div>
					<table class="thead-tbl">
						<colgroup>
							<col style="width:12%">
							<col style="width:20%">
							<col style="width:*%">
							<col style="width:20%">
						</colgroup>
						<thead>
							<tr>
								<th>번호</th>
					   			<th>고사장 이름</th>
					   			<th>학교 이름</th>
					   			<th>주소</th>		
							</tr>
						</thead>
						<tbody>
							<% for(let i=0; i<list.length; ++i){ %>
					   	<tr>
								<td><%=max-i%></td>
								<td><%=list[i].NAME%></td>
								<td><a href="/admin/exam/update/<%=page%>/<%=list[i].SEQ%>"><%=list[i].SCHOOL%></a></td>
								<td><%=list[i].ADDR%></td>
							</tr>
					   	<% } %>
						</tbody>
					</table>
				</div>
				<% }else{ %>
				<div>게시물이 없습니다.</div>
				<% } %>
			
				<% if(result == true) { %>
					<div class="pagenum">
						<ul>
							<% if(page > pageSize) { %>
							<li><a href="/admin/exam/list/1/<%=search%>"><i class="fa fa-angle-double-left"></i></a></li>
							<li><a href="/admin/exam/list/<%=startPage-1%>/<%=search%>"><i class="fa fa-angle-left"></i></a></li>
							<% } %>
							
							<% for (var i=startPage; i<=endPage; i++) { %>
				        	<% if (i== page) {%>
				        	<li class="on"><%=i%></li>
				        	<% } else { %>
				        	<li><a href="/admin/exam/list/<%=i%>/<%=search%>"><%=i%></a></li>
				       		<% } %>
				      		<% } %>
							
							<% if (endPage < totalPage) { %>
							<li><a href="/admin/exam/list/<%=endPage+1%>/<%=search%>"><i class="fa fa-angle-right"></i></a></li>
							<li><a href="/admin/exam/list/<%=totalPage%>/<%=search%>"><i class="fa fa-angle-double-right"></i></a></li>
				      	    <% } %>
						</ul>
					</div>
				<% } %>
				 	
			 	<div class="btnfr">
					<button type="button" id="addBtn" class="mbtn skybtn">추가</button>
				</div>
				
  		</div>
  		
  		<div class="top">
				<a href="#">
					<span>TOP</span>
				</a>
			</div>
  	</div>
  	
  </body>
  <script src='/adm/js/exam.js'></script>
  <script src='http://ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js'></script>
  <script type="text/javascript">
			Element.Properties.transform = {
	
	  set: function(transform){
	    var property = 'transform';
			console.log(Browser);
			if(Browser.chrome) property = 'WebkitTransform';
			if(Browser.firefox)  property = 'MozTransform';
			if(Browser.opera) property = 'OTransform';
			
			this.style[property] = transform;
			this.store('transform', transform);
		},
	
		get: function(){
			return this.retrieve('transform', '');
		}
	
	};
	
	Element.implement({
	
		setTransform: function(value){
			return this.set('transform', value);
		},
	
		getTransform: function(){
			return this.get('transform');
		}
	
	});
	
	$(window).addEvent('domready', function()
	{
	  var $hourWrap = $$('.hour-wrap');
		var $hourFront = $hourWrap.getElement('div.front');
		var $hourBack = $hourWrap.getElement('div.back')
		var $hourTop = $hourWrap.getElement('div.digit-top');
		var $hourBottom = $hourWrap.getElement('div.digit-bottom .front');
	
		var $minWrap = $$('.min-wrap');
		var $minFront = $minWrap.getElement('div.front');
		var $minBack = $minWrap.getElement('div.back');
		var $minTop = $minWrap.getElement('div.digit-top');
		var $minBottom = $minWrap.getElement('div.digit-bottom .front');
	  
	  
	  var $secWrap = $$('.sec-wrap');
		var $secFront = $secWrap.getElement('div.front');
		var $secBack = $secWrap.getElement('div.back');
		var $secTop = $secWrap.getElement('div.digit-top');
		var $secBottom = $secWrap.getElement('div.digit-bottom .front');
	
		var currentHour = 0;
		var currentMin = 0;
	  var currentSec = 0;
	
		var setClock = function()
		{
			var time = new Date();
			var hour = time.getHours();
			var min = time.getMinutes();
	    var sec = time.getSeconds();
	
			if(currentHour != hour)
			{
				currentHour = hour;
				var hourText = hour < 10 ? '0'+hour : hour;
	
				// make el to sit behind the top digit
				var $newHourTop = new Element('div', {class: 'digit-top', html: $hourTop.get('html'), style: 'z-index:1;'})
				var $newHourFront = $newHourTop.getElement('div.front');
				var $newHourBack = $newHourTop.getElement('div.back');
	
				$newHourFront.set('text', hourText);
				$hourWrap.adopt($newHourTop);
	
				// start the animation
				$hourFront.setTransform('rotateX(180deg)');
				$hourBack.setTransform('rotateX(0deg)');
				$hourBack.setStyle('zIndex', 40);
	
				// set the min back
				$hourBack.set('text', hourText);
	
				(function()
				{
					$hourTop.destroy();
					$hourFront.destroy();
					$hourBack.destroy();
	
					$hourTop = $newHourTop;
					$hourFront = $newHourFront;
					$hourBack = $newHourBack;
	
					$hourTop.setStyle('zIndex', 10);
					$hourBottom.set('text', hourText);
				}).delay(800);
			}
	
			if(currentMin != min)
			{
				currentMin = min;
				var minText = min < 10 ? '0'+min : min;
	
				// make el to sit behind the top digit
				var $newMinTop = new Element('div', {class: 'digit-top', html: $minTop.get('html'), style: 'z-index:1;'})
				var $newMinFront = $newMinTop.getElement('div.front');
				var $newMinBack = $newMinTop.getElement('div.back');
	
				$newMinFront.set('text', minText);
				$minWrap.adopt($newMinTop);
	
				// start the animation
				$minFront.setTransform('rotateX(180deg)');
				$minBack.setTransform('rotateX(0deg)');
				$minBack.setStyle('zIndex', 40);
	
				// set the min back
				$minBack.set('text', minText);
	
				(function()
				{
					$minTop.destroy();
					$minFront.destroy();
					$minBack.destroy();
	
					$minTop = $newMinTop;
					$minFront = $newMinFront;
					$minBack = $newMinBack;
	
					$minTop.setStyle('zIndex', 10);
					$minBottom.set('text', minText);
				}).delay(800);
			}
	    
	    
	    if(currentSec != sec)
			{
				currentSec = sec;
				var secText = sec < 10 ? '0'+sec : sec;
	
				// make el to sit behind the top digit
				var $newSecTop = new Element('div', {class: 'digit-top', html: $secTop.get('html'), style: 'z-index:1;'})
				var $newSecFront = $newSecTop.getElement('div.front');
				var $newSecBack = $newSecTop.getElement('div.back');
	
				$newSecFront.set('text', secText);
				$secWrap.adopt($newSecTop);
	
				// start the animation
				$secFront.setTransform('rotateX(180deg)');
				$secBack.setTransform('rotateX(0deg)');
				$secBack.setStyle('zIndex', 40);
	
				// set the min back
				$secBack.set('text', secText);
	
				(function()
				{
					$secTop.destroy();
					$secFront.destroy();
					$secBack.destroy();
	
					$secTop = $newSecTop;
					$secFront = $newSecFront;
					$secBack = $newSecBack;
	
					$secTop.setStyle('zIndex', 10);
					$secBottom.set('text', secText);
				}).delay(800);
			}
	
			//$hourEls.set('text', hour);
			
		}
	
		setClock.periodical(1000);
	});
	</script>
</html>
